---
title: "Extraer los AGEBs de una localidad"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{extract_agebs_es}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(rgeomex)
```

Para extraer los AGEBs de una localidad urbana de interes se usa la función función **extract_ageb** y en el caso de cdmx se extrae manual. La función **extract_ageb** tiene dos argumentos, uno para definir la clave del estado (cve_geo) y el otro para definir el nombre de la localidad de acuerdo al INEGI 2020 (locality). La función regresa una lista con dos elementos, un elemento correspondo a la localidad (locality) y el otro elemento corresponde a los AGEBS (ageb)

```{r ageb_merida}
merida <- rgeomex::extract_ageb(cve_geo = "31",
                                locality = "Merida")

mapview::mapview(merida$ageb, legend = FALSE)
```

En el caso de ls Ciudad de México, primero se extrae la localidad y después, se realiza un recorte (clip) de los ageb con los limites de la CdMx.

```{r loc_cdmx}
# Paso 1. extraer la localidad 
cdmx_loc <- rgeomex::loc_inegi19_mx |>
    dplyr::filter(CVE_ENT == "09") 

# Paso 2. extraer los agebs 
cdmx_agebs <- rgeomex::AGEB_inegi_2019_a |>
  sf::st_make_valid()

cdmx_agebs <- cdmx_agebs[cdmx_loc, ]

# Paso 3. verificar 
mapview::mapview(cdmx_agebs,legend = FALSE)
```





